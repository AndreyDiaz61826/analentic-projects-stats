<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Arizona RP Stat</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background: #0a0f1c;
            color: #00f0ff;
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        .card {
            background: rgba(17,26,46,0.9);
            margin: auto;
            padding: 20px;
            width: 400px;
            border-radius: 12px;
            box-shadow: 0 0 15px #00f0ff;
        }
        .title {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .label {
            font-weight: bold;
        }
        canvas { 
            margin-top: 20px; 
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
        }
    </style>
</head>
<body>

<div class="card">
    <div class="title">Arizona RP | Eshkere</div>
    <p><span class="label">–°—Ç–∞—Ç—É—Å:</span> <span id="statusText">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
    <p><span class="label">–û–Ω–ª–∞–π–Ω:</span> <span id="onlineCount">0</span></p>
    <p><span class="label">–ú–∞–∫—Å –∏–≥—Ä–æ–∫–æ–≤:</span> <span id="maxPlayers">0</span></p>
    <p><span class="label">IP:PORT:</span> 185.169.134.107:7777</p>
</div>

<canvas id="onlineChart" width="400" height="200"></canvas>

<script>
// URL —Ä–µ–∞–ª—å–Ω–æ–≥–æ API
const API_URL = "https://api.gamemonitoring.ru/servers/9767606";

// –ò—Å—Ç–æ—Ä–∏—è –æ–Ω–ª–∞–π–Ω –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞
let onlineHistory = [];
let chart;

// –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
async function updateServerStats() {
    try {
        const response = await fetch(API_URL);
        const data = await response.json();

        // –í—Å—Ç–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –∫–∞—Ä—Ç–æ—á–∫—É
        const online = data.numplayers ?? 0;
        const maxPlayers = data.maxplayers ?? 0;
        const status = data.online ? "üü¢ –û–Ω–ª–∞–π–Ω" : "üî¥ –û—Ñ—Ñ–ª–∞–π–Ω";

        document.getElementById("onlineCount").innerText = online;
        document.getElementById("maxPlayers").innerText = maxPlayers;
        document.getElementById("statusText").innerText = status;

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞
        onlineHistory.push(online);
        if (onlineHistory.length > 20) onlineHistory.shift();

        if (!chart) {
            const ctx = document.getElementById('onlineChart').getContext('2d');
            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: onlineHistory.map((v, i) => i + 1),
                    datasets: [{
                        label: '–û–Ω–ª–∞–π–Ω',
                        data: onlineHistory,
                        borderColor: '#00f0ff',
                        backgroundColor: 'rgba(0,240,255,0.2)',
                        tension: 0.4
                    }]
                },
                options: {
                    scales: { y: { beginAtZero: true } },
                    responsive: true
                }
            });
        } else {
            chart.data.labels = onlineHistory.map((v, i) => i + 1);
            chart.data.datasets[0].data = onlineHistory;
            chart.update();
        }
    } catch (error) {
        console.error("–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:", error);
    }
}

// –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
updateServerStats();
setInterval(updateServerStats, 30000);
</script>

</body>
</html>
