<!DOCTYPE html>
<html>
<head>
    <title>–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –¶–µ–Ω—Ç—Ä</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background: url('https://raw.githubusercontent.com/AndreyDiaz61826/analentic-projects-stats/main/1772321795528.png') no-repeat center center fixed;
            background-size: cover;
            color: #00f0ff;
            font-family: 'Arial', sans-serif;
            text-align: center;
            margin: 0;
            position: relative;
        }
        body::before {
            content: "";
            position: fixed;
            top:0;
            left:0;
            width:100%;
            height:100%;
            background: rgba(0,0,0,0.5);
            z-index:0;
        }
        h1 {
            margin-top: 40px;
            text-shadow: 0 0 15px #00f0ff;
            position: relative;
            z-index: 1;
        }
        .menu-games {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }
        .menu-games button {
            background: rgba(0,0,0,0.8);
            color: #00f0ff;
            border: 2px solid #00f0ff;
            border-radius: 12px;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }
        .menu-games button:hover {
            background: #00f0ff;
            color: #0a0f1c;
            box-shadow: 0 0 15px #00f0ff;
        }
        .card {
            background: rgba(17,26,46,0.85);
            margin: 20px auto;
            padding: 20px;
            width: 400px;
            border-radius: 16px;
            box-shadow: 0 0 20px #00f0ff;
            position: relative;
            z-index: 1;
        }
        #status {
            font-weight:bold;
            font-size:18px;
        }
        canvas {
            max-width: 90%;
            margin: auto;
            display:block;
        }
        input[type=password] {
            padding:12px;
            border-radius:12px;
            border:none;
            font-size:16px;
            background: rgba(17,26,46,0.8);
            color:#00f0ff;
            position: relative;
            z-index:1;
        }
        input[type=password]:focus {
            outline:none;
            box-shadow: 0 0 15px #00f0ff;
        }
        .login-box {
            margin-top: 150px;
            position: relative;
            z-index:1;
        }
        #error {
            text-shadow: 0 0 5px red;
        }
    </style>
</head>
<body>

<div id="loginScreen" class="login-box">
    <h1>–ù–æ–≤—ã–π<br>–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –¶–µ–Ω—Ç—Ä<br>–û—Ç –∫–æ–º–∞–Ω–¥—ã üíéDARKSüçÄ</h1>
    <p>–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞</p>
    <input type="password" id="passwordInput" placeholder="–ü–∞—Ä–æ–ª—å">
    <button onclick="checkPassword()">–í–æ–π—Ç–∏</button>
    <p id="error" style="color:red;"></p>
</div>

<div id="mainPanel" style="display:none;">
    <h1>–ù–æ–≤—ã–π –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –¶–µ–Ω—Ç—Ä</h1>

    <div class="menu-games">
        <button onclick="selectGame('rodina')">Rodina RP</button>
    </div>

    <select id="serverSelect" onchange="loadStats()" style="display:none; margin-top:20px;">
    </select>

    <div class="card" id="statsCard">
        <h2 id="serverTitle"></h2>
        <p>–û–Ω–ª–∞–π–Ω: <span id="online">0</span> <span id="status">üü¢</span></p>
        <p>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: <span id="lastUpdate">--:--:--</span></p>
        <p>–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏: <span id="devs"></span></p>
        <p>–°–ø–æ–Ω—Å–æ—Ä—ã: <span id="sponsors"></span></p>
        <p>–î–≤–∏–∂–æ–∫: <span id="engine"></span></p>
        <canvas id="onlineChart"></canvas>
    </div>
</div>

<script>
const PASSWORD = "Ben2Tennis3451";

function checkPassword() {
    const input = document.getElementById("passwordInput").value;
    if(input === PASSWORD){
        document.getElementById("loginScreen").style.display="none";
        document.getElementById("mainPanel").style.display="block";
    } else {
        document.getElementById("error").innerText="–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å";
    }
}

// –ò–≥—Ä—ã –∏ —Å–µ—Ä–≤–µ—Ä–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º API
const games = {
    rodina:[
        {name:"Rodina 1", api:"https://api.gamemonitoring.ru/servers/10022967"},
        {name:"Rodina 2", api:"https://api.gamemonitoring.ru/servers/10105694"}
    ]
};

let onlineHistory=[];
let chart;

function selectGame(game) {
    const serverSelect = document.getElementById("serverSelect");
    serverSelect.innerHTML="";
    document.getElementById("statsCard").style.display="none";

    games[game].forEach(s => {
        let option = document.createElement("option");
        option.text = s.name;
        option.value = s.api;
        serverSelect.add(option);
    });
    serverSelect.style.display = "inline-block";
}

// –ü–æ–¥–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —á–µ—Ä–µ–∑ API
async function loadStats(){
    const serverSelect=document.getElementById("serverSelect");
    const apiUrl=serverSelect.value;
    if(!apiUrl) return;
    document.getElementById("statsCard").style.display="block";
    document.getElementById("serverTitle").innerText=serverSelect.options[serverSelect.selectedIndex].text;

    document.getElementById("devs").innerText="Unknown Devs";
    document.getElementById("sponsors").innerText="Unknown Sponsors";
    document.getElementById("engine").innerText="Unknown Engine";

    async function updateOnline(){
        try {
            const res = await fetch(apiUrl);
            const data = await res.json();
            const online = data.numplayers || 0;
            document.getElementById("online").innerText = online;
            document.getElementById("status").innerText = online>0?"üü¢":"üî¥";
            document.getElementById("lastUpdate").innerText = new Date().toLocaleTimeString();

            onlineHistory.push(online);
            if(onlineHistory.length>20) onlineHistory.shift();
            chart.data.labels = onlineHistory.map((v,i)=>i+1);
            chart.data.datasets[0].data = onlineHistory;
            chart.update();
        } catch(e) {
            document.getElementById("online").innerText="–û—à–∏–±–∫–∞";
            document.getElementById("status").innerText="üî¥";
        }
    }

    if(!chart){
        const ctx=document.getElementById('onlineChart').getContext('2d');
        chart=new Chart(ctx,{
            type:'line',
            data:{
                labels:[],
                datasets:[{
                    label:'–û–Ω–ª–∞–π–Ω',
                    data:[],
                    borderColor:'#00f0ff',
                    backgroundColor:'rgba(0,240,255,0.2)',
                    tension:0.3
                }]
            },
            options:{responsive:true,animation:{duration:500}}
        });
    }

    updateOnline();
    setInterval(updateOnline,30000);
}
</script>

</body>
</html>
